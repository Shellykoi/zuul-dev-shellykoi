# World of Zuul æ¸¸æˆé¡¹ç›®å®è®­æŠ¥å‘Š

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

ã€ŠWorld of Zuulã€‹æ˜¯ä¸€æ¬¾åŸºäºæ–‡æœ¬çš„å†’é™©æ¸¸æˆã€‚æœ¬é¡¹ç›®åœ¨åŸå§‹æ ·ä¾‹ä»£ç çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†å…¨é¢çš„åŠŸèƒ½æ‰©å±•å’Œæ¶æ„æ”¹è¿›ï¼Œå®ç°äº†ç‰©å“ç³»ç»Ÿã€ç©å®¶ç³»ç»Ÿã€å‘½ä»¤æ¨¡å¼é‡æ„ã€Webå‰ç«¯ç•Œé¢ã€æ•°æ®åº“æ”¯æŒç­‰å¤šé¡¹åŠŸèƒ½ã€‚

### 1.2 å¼€å‘ç¯å¢ƒ

- **ç¼–ç¨‹è¯­è¨€**: Java
- **æ•°æ®åº“**: MySQL 8.0+
- **å‰ç«¯æŠ€æœ¯**: HTML5, CSS3, JavaScript (ES6+)
- **å¼€å‘å·¥å…·**: IntelliJ IDEA / PyCharm
- **ç‰ˆæœ¬æ§åˆ¶**: Git

---

## äºŒã€ä»£ç ç»“æ„åˆ†æ

### 2.1 é¡¹ç›®æ•´ä½“ç»“æ„

```
se23-sept1-Shellykoi/
â”œâ”€â”€ src/cn/edu/whut/sept/zuul/     # Javaæºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ Main.java                   # æ§åˆ¶å°ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ WebMain.java                # WebæœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ Game.java                   # æ¸¸æˆä¸»æ§åˆ¶ç±»
â”‚   â”œâ”€â”€ Player.java                 # ç©å®¶ç±»
â”‚   â”œâ”€â”€ Room.java                   # æˆ¿é—´ç±»
â”‚   â”œâ”€â”€ TransporterRoom.java        # ä¼ è¾“æˆ¿é—´ç±»ï¼ˆç»§æ‰¿Roomï¼‰
â”‚   â”œâ”€â”€ Item.java                   # ç‰©å“ç±»
â”‚   â”œâ”€â”€ Command.java                # å‘½ä»¤ç±»
â”‚   â”œâ”€â”€ CommandExecutor.java        # å‘½ä»¤æ‰§è¡Œå™¨æ¥å£
â”‚   â”œâ”€â”€ Parser.java                 # å‘½ä»¤è§£æå™¨
â”‚   â”œâ”€â”€ CommandWords.java           # å‘½ä»¤è¯éªŒè¯ç±»
â”‚   â”œâ”€â”€ GameController.java         # Web APIæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ GameWebServer.java          # HTTPæœåŠ¡å™¨
â”‚   â”œâ”€â”€ DatabaseManager.java        # æ•°æ®åº“ç®¡ç†å™¨
â”‚   â”œâ”€â”€ GameStateManager.java       # æ¸¸æˆçŠ¶æ€ç®¡ç†å™¨
â”‚   â”œâ”€â”€ GameCompletionChecker.java # é€šå…³æ£€æµ‹å™¨
â”‚   â”œâ”€â”€ JsonUtil.java               # JSONå·¥å…·ç±»
â”‚   â””â”€â”€ [å‘½ä»¤ç±»]                    # å„ç§å‘½ä»¤æ‰§è¡Œç±»
â”œâ”€â”€ web/                            # Webå‰ç«¯æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html                  # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ style.css                   # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ game.js                     # æ¸¸æˆé€»è¾‘
â”œâ”€â”€ lib/                            # ç¬¬ä¸‰æ–¹åº“
â”‚   â””â”€â”€ mysql-connector-j-9.5.0.jar # MySQLé©±åŠ¨
â””â”€â”€ bin/                            # ç¼–è¯‘è¾“å‡ºç›®å½•
```

### 2.2 UMLç±»å›¾

#### 2.2.1 æ ¸å¿ƒç±»å…³ç³»å›¾

```mermaid
classDiagram
    class Main {
        +main(String[] args)
    }
    
    class WebMain {
        +main(String[] args)
    }
    
    class Game {
        -Parser parser
        -Player player
        -HashMap~String,CommandExecutor~ commandExecutors
        -Stack~Room~ roomHistory
        +play()
        +processCommand(Command)
        +addRoomToHistory(Room)
        +getPreviousRoom() Room
    }
    
    class Player {
        -String name
        -Room currentRoom
        -HashMap~String,Item~ inventory
        -double maxWeight
        -Set~String~ roomsVisited
        -Set~String~ itemsCollected
        -boolean cookieEaten
        +takeItem(Item)
        +dropItem(String) Item
        +canCarry(Item) boolean
        +eatCookie()
        +increaseMaxWeight(double)
    }
    
    class Room {
        -String description
        -HashMap~String,Room~ exits
        -HashMap~String,Item~ items
        +setExit(String, Room)
        +getExit(String) Room
        +addItem(Item)
        +removeItem(String) Item
        +getLongDescription() String
    }
    
    class TransporterRoom {
        -HashMap~String,Room~ allRooms
        +getRandomRoom() Room
    }
    
    class Item {
        -String name
        -String description
        -double weight
        +getName() String
        +getDescription() String
        +getWeight() double
    }
    
    class Command {
        -String commandWord
        -String secondWord
        +getCommandWord() String
        +hasSecondWord() boolean
    }
    
    class Parser {
        -CommandWords commands
        -Scanner reader
        +getCommand() Command
        +parseCommand(String) Command
    }
    
    class CommandExecutor {
        <<interface>>
        +execute(Command, Game, Player) String
    }
    
    class GoCommand {
        +execute(Command, Game, Player) String
    }
    
    class LookCommand {
        +execute(Command, Game, Player) String
    }
    
    class TakeCommand {
        +execute(Command, Game, Player) String
    }
    
    class BackCommand {
        +execute(Command, Game, Player) String
    }
    
    class GameController {
        -Map~String,GameSession~ sessions
        -DatabaseManager dbManager
        +register(String, String) Map
        +login(String, String) Map
        +executeCommand(String, String) Map
        +getGameStatus(String) Map
    }
    
    class GameWebServer {
        -GameController gameController
        -int actualPort
        +start()
        +handleRequest(Socket)
        +handleApiRequest(String, String, String, PrintWriter)
    }
    
    class DatabaseManager {
        -Connection connection
        +getInstance() DatabaseManager
        +registerUser(String, String) boolean
        +loginUser(String, String) Integer
        +savePlayerState(...) boolean
        +loadPlayerState(int) Map
    }
    
    Main --> Game
    WebMain --> GameWebServer
    GameWebServer --> GameController
    GameController --> Game
    GameController --> DatabaseManager
    Game --> Player
    Game --> Parser
    Game --> CommandExecutor
    Game --> Room
    Player --> Room
    Player --> Item
    Room --> Item
    TransporterRoom --|> Room
    Parser --> Command
    CommandExecutor <|.. GoCommand
    CommandExecutor <|.. LookCommand
    CommandExecutor <|.. TakeCommand
    CommandExecutor <|.. BackCommand
    Game --> CommandExecutor
```

#### 2.2.2 å‘½ä»¤æ¨¡å¼ç»“æ„å›¾

```mermaid
classDiagram
    class CommandExecutor {
        <<interface>>
        +execute(Command, Game, Player) String
    }
    
    class GoCommand {
        +execute(Command, Game, Player) String
    }
    
    class LookCommand {
        +execute(Command, Game, Player) String
    }
    
    class BackCommand {
        +execute(Command, Game, Player) String
    }
    
    class TakeCommand {
        +execute(Command, Game, Player) String
    }
    
    class DropCommand {
        +execute(Command, Game, Player) String
    }
    
    class ItemsCommand {
        +execute(Command, Game, Player) String
    }
    
    class EatCookieCommand {
        +execute(Command, Game, Player) String
    }
    
    class HelpCommand {
        +execute(Command, Game, Player) String
    }
    
    class QuitCommand {
        +execute(Command, Game, Player) String
    }
    
    class StatusCommand {
        +execute(Command, Game, Player) String
    }
    
    class SaveCommand {
        +execute(Command, Game, Player) String
    }
    
    class LoadCommand {
        +execute(Command, Game, Player) String
    }
    
    CommandExecutor <|.. GoCommand
    CommandExecutor <|.. LookCommand
    CommandExecutor <|.. BackCommand
    CommandExecutor <|.. TakeCommand
    CommandExecutor <|.. DropCommand
    CommandExecutor <|.. ItemsCommand
    CommandExecutor <|.. EatCookieCommand
    CommandExecutor <|.. HelpCommand
    CommandExecutor <|.. QuitCommand
    CommandExecutor <|.. StatusCommand
    CommandExecutor <|.. SaveCommand
    CommandExecutor <|.. LoadCommand
```

### 2.3 æ ¸å¿ƒç±»è¯´æ˜

#### 2.3.1 Gameç±»
- **èŒè´£**: æ¸¸æˆä¸»æ§åˆ¶ç±»ï¼Œç®¡ç†æ¸¸æˆçŠ¶æ€ã€æˆ¿é—´ã€ç©å®¶å’Œå‘½ä»¤æ‰§è¡Œ
- **å…³é”®å±æ€§**:
  - `parser`: å‘½ä»¤è§£æå™¨
  - `player`: ç©å®¶å¯¹è±¡
  - `commandExecutors`: å‘½ä»¤æ‰§è¡Œå™¨æ˜ å°„è¡¨ï¼ˆå‘½ä»¤æ¨¡å¼ï¼‰
  - `roomHistory`: æˆ¿é—´å†å²æ ˆï¼ˆç”¨äºbackå‘½ä»¤ï¼‰
- **å…³é”®æ–¹æ³•**:
  - `play()`: æ¸¸æˆä¸»å¾ªç¯
  - `processCommand(Command)`: å¤„ç†å‘½ä»¤ï¼ˆä½¿ç”¨å‘½ä»¤æ¨¡å¼ï¼‰
  - `addRoomToHistory(Room)`: æ·»åŠ æˆ¿é—´åˆ°å†å²æ ˆ
  - `getPreviousRoom()`: è·å–ä¸Šä¸€ä¸ªæˆ¿é—´

#### 2.3.2 Playerç±»
- **èŒè´£**: ç®¡ç†ç©å®¶ä¿¡æ¯ã€ä½ç½®ã€ç‰©å“å’Œæ¸¸æˆè¿›åº¦
- **å…³é”®å±æ€§**:
  - `name`: ç©å®¶å§“å
  - `currentRoom`: å½“å‰æ‰€åœ¨æˆ¿é—´
  - `inventory`: ç‰©å“æ¸…å•ï¼ˆHashMapï¼‰
  - `maxWeight`: æœ€å¤§è´Ÿé‡
  - `roomsVisited`: å·²è®¿é—®çš„æˆ¿é—´é›†åˆ
  - `itemsCollected`: å·²æ”¶é›†çš„ç‰©å“é›†åˆ
  - `cookieEaten`: æ˜¯å¦åƒæ‰é­”æ³•é¥¼å¹²
- **å…³é”®æ–¹æ³•**:
  - `takeItem(Item)`: æ‹¾å–ç‰©å“ï¼ˆæ£€æŸ¥è´Ÿé‡ï¼‰
  - `dropItem(String)`: ä¸¢å¼ƒç‰©å“
  - `canCarry(Item)`: æ£€æŸ¥æ˜¯å¦å¯ä»¥æºå¸¦
  - `eatCookie()`: åƒæ‰é­”æ³•é¥¼å¹²ï¼ˆå¢åŠ è´Ÿé‡ï¼‰

#### 2.3.3 Roomç±»
- **èŒè´£**: è¡¨ç¤ºæ¸¸æˆä¸­çš„æˆ¿é—´ï¼Œç®¡ç†å‡ºå£å’Œç‰©å“
- **å…³é”®å±æ€§**:
  - `description`: æˆ¿é—´æè¿°
  - `exits`: å‡ºå£æ˜ å°„ï¼ˆæ–¹å‘ -> æˆ¿é—´ï¼‰
  - `items`: ç‰©å“æ˜ å°„ï¼ˆåç§° -> ç‰©å“ï¼‰
- **å…³é”®æ–¹æ³•**:
  - `setExit(String, Room)`: è®¾ç½®å‡ºå£
  - `getExit(String)`: è·å–å‡ºå£
  - `addItem(Item)`: æ·»åŠ ç‰©å“
  - `removeItem(String)`: ç§»é™¤ç‰©å“
  - `getLongDescription()`: è·å–è¯¦ç»†æè¿°ï¼ˆåŒ…å«ç‰©å“ä¿¡æ¯ï¼‰

#### 2.3.4 Itemç±»
- **èŒè´£**: è¡¨ç¤ºæ¸¸æˆä¸­çš„ç‰©å“
- **å…³é”®å±æ€§**:
  - `name`: ç‰©å“åç§°
  - `description`: ç‰©å“æè¿°
  - `weight`: ç‰©å“é‡é‡ï¼ˆåƒå…‹ï¼‰
- **å…³é”®æ–¹æ³•**: Getteræ–¹æ³•

#### 2.3.5 CommandExecutoræ¥å£
- **èŒè´£**: å‘½ä»¤æ‰§è¡Œå™¨æ¥å£ï¼ˆå‘½ä»¤æ¨¡å¼ï¼‰
- **å…³é”®æ–¹æ³•**:
  - `execute(Command, Game, Player)`: æ‰§è¡Œå‘½ä»¤

#### 2.3.6 GameControllerç±»
- **èŒè´£**: Web APIæ§åˆ¶å™¨ï¼Œå¤„ç†HTTPè¯·æ±‚
- **å…³é”®å±æ€§**:
  - `sessions`: æ¸¸æˆä¼šè¯æ˜ å°„ï¼ˆæ”¯æŒå¤šç©å®¶ï¼‰
  - `dbManager`: æ•°æ®åº“ç®¡ç†å™¨
- **å…³é”®æ–¹æ³•**:
  - `register(String, String)`: ç”¨æˆ·æ³¨å†Œ
  - `login(String, String)`: ç”¨æˆ·ç™»å½•
  - `executeCommand(String, String)`: æ‰§è¡Œæ¸¸æˆå‘½ä»¤
  - `getGameStatus(String)`: è·å–æ¸¸æˆçŠ¶æ€

#### 2.3.7 DatabaseManagerç±»
- **èŒè´£**: æ•°æ®åº“è¿æ¥å’Œæ“ä½œç®¡ç†ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
- **å…³é”®æ–¹æ³•**:
  - `getInstance()`: è·å–å•ä¾‹å®ä¾‹
  - `registerUser(String, String)`: æ³¨å†Œç”¨æˆ·
  - `loginUser(String, String)`: ç”¨æˆ·ç™»å½•éªŒè¯
  - `savePlayerState(...)`: ä¿å­˜æ¸¸æˆçŠ¶æ€
  - `loadPlayerState(int)`: åŠ è½½æ¸¸æˆçŠ¶æ€

---

## ä¸‰ã€è®¾è®¡ç¼ºé™·åˆ†æä¸æ”¹è¿›

### 3.1 åŸå§‹è®¾è®¡ç¼ºé™·

#### 3.1.1 å‘½ä»¤å¤„ç†è®¾è®¡ç¼ºé™·
**é—®é¢˜æè¿°**:
- `Game.processCommand()` æ–¹æ³•ä½¿ç”¨å¤§é‡ if-else è¯­å¥å¤„ç†å‘½ä»¤
- æ·»åŠ æ–°å‘½ä»¤éœ€è¦ä¿®æ”¹æ ¸å¿ƒæ–¹æ³•ï¼Œè¿åå¼€é—­åŸåˆ™ï¼ˆOpen-Closed Principleï¼‰
- å‘½ä»¤å¤„ç†é€»è¾‘è€¦åˆåœ¨ Game ç±»ä¸­ï¼Œå¯¼è‡´ä»£ç è‡ƒè‚¿

**åŸå§‹ä»£ç ç¤ºä¾‹**:
```java
public void processCommand(Command command) {
    String commandWord = command.getCommandWord();
    
    if (commandWord.equals("go")) {
        // å¤„ç†goå‘½ä»¤
    } else if (commandWord.equals("help")) {
        // å¤„ç†helpå‘½ä»¤
    } else if (commandWord.equals("quit")) {
        // å¤„ç†quitå‘½ä»¤
    }
    // ... æ›´å¤šif-else
}
```

#### 3.1.2 ç¼ºå°‘ç‰©å“ç³»ç»Ÿ
- æˆ¿é—´æ— æ³•å­˜å‚¨ç‰©å“
- ç©å®¶æ— æ³•æºå¸¦ç‰©å“
- æ²¡æœ‰ç‰©å“é‡é‡é™åˆ¶æœºåˆ¶

#### 3.1.3 ç¼ºå°‘ç©å®¶ç±»
- ç©å®¶ä¿¡æ¯ç›´æ¥å­˜å‚¨åœ¨ Game ç±»ä¸­
- æ— æ³•ç®¡ç†ç©å®¶çŠ¶æ€å’Œå±æ€§
- æ— æ³•å®ç°å¤šç©å®¶åŠŸèƒ½

#### 3.1.4 ç¼ºå°‘å†å²è®°å½•
- æ— æ³•å®ç° back å‘½ä»¤
- æ²¡æœ‰æˆ¿é—´è®¿é—®å†å²è¿½è¸ª

### 3.2 æ”¹è¿›æ–¹æ¡ˆ

#### 3.2.1 å‘½ä»¤æ¨¡å¼é‡æ„

**æ”¹è¿›æ€è·¯**:
1. åˆ›å»º `CommandExecutor` æ¥å£ï¼Œå®šä¹‰å‘½ä»¤æ‰§è¡Œè§„èŒƒ
2. ä¸ºæ¯ä¸ªå‘½ä»¤åˆ›å»ºç‹¬ç«‹çš„æ‰§è¡Œç±»ï¼Œå®ç° `CommandExecutor` æ¥å£
3. åœ¨ Game ç±»ä¸­ä½¿ç”¨ HashMap å­˜å‚¨å‘½ä»¤æ˜ å°„
4. é€šè¿‡å‘½ä»¤è¯æŸ¥æ‰¾å¯¹åº”çš„æ‰§è¡Œå™¨å¹¶æ‰§è¡Œ

**æ”¹è¿›åçš„ä»£ç ç»“æ„**:
```java
// 1. å®šä¹‰å‘½ä»¤æ‰§è¡Œå™¨æ¥å£
public interface CommandExecutor {
    String execute(Command command, Game game, Player player);
}

// 2. å®ç°å…·ä½“å‘½ä»¤ç±»
public class GoCommand implements CommandExecutor {
    public String execute(Command command, Game game, Player player) {
        // æ‰§è¡Œgoå‘½ä»¤é€»è¾‘
    }
}

// 3. åœ¨Gameç±»ä¸­ä½¿ç”¨å‘½ä»¤æ¨¡å¼
private HashMap<String, CommandExecutor> commandExecutors;

private void initializeCommands() {
    commandExecutors = new HashMap<>();
    commandExecutors.put("go", new GoCommand());
    commandExecutors.put("look", new LookCommand());
    // ... æ³¨å†Œå…¶ä»–å‘½ä»¤
}

public void processCommand(Command command) {
    String commandWord = command.getCommandWord();
    CommandExecutor executor = commandExecutors.get(commandWord);
    if (executor != null) {
        String result = executor.execute(command, this, player);
        System.out.println(result);
    } else {
        System.out.println("æˆ‘ä¸çŸ¥é“ä½ åœ¨è¯´ä»€ä¹ˆ...");
    }
}
```

**ä¼˜åŠ¿**:
- âœ… ç¬¦åˆå¼€é—­åŸåˆ™ï¼šæ–°å¢å‘½ä»¤åªéœ€åˆ›å»ºæ–°ç±»å¹¶æ³¨å†Œï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 
- âœ… èŒè´£åˆ†ç¦»ï¼šæ¯ä¸ªå‘½ä»¤ç±»åªè´Ÿè´£è‡ªå·±çš„é€»è¾‘
- âœ… æ˜“äºæ‰©å±•ï¼šæ·»åŠ æ–°å‘½ä»¤åªéœ€3æ­¥ï¼ˆåˆ›å»ºç±»ã€å®ç°æ¥å£ã€æ³¨å†Œï¼‰
- âœ… ä»£ç æ¸…æ™°ï¼šæ¶ˆé™¤äº†å†—é•¿çš„ if-else é“¾

#### 3.2.2 ç‰©å“ç³»ç»Ÿå®ç°

**å®ç°å†…å®¹**:
1. åˆ›å»º `Item` ç±»ï¼ŒåŒ…å«åç§°ã€æè¿°ã€é‡é‡å±æ€§
2. åœ¨ `Room` ç±»ä¸­æ·»åŠ  `HashMap<String, Item> items` å±æ€§
3. å®ç°ç‰©å“çš„æ·»åŠ ã€ç§»é™¤ã€æŸ¥æ‰¾æ–¹æ³•
4. åœ¨æˆ¿é—´æè¿°ä¸­æ˜¾ç¤ºç‰©å“ä¿¡æ¯

**å…³é”®ä»£ç **:
```java
// Itemç±»
public class Item {
    private String name;
    private String description;
    private double weight;
    // ... getteræ–¹æ³•
}

// Roomç±»æ‰©å±•
public class Room {
    private HashMap<String, Item> items;
    
    public void addItem(Item item) {
        items.put(item.getName().toLowerCase(), item);
    }
    
    public Item removeItem(String itemName) {
        return items.remove(itemName.toLowerCase());
    }
    
    public String getItemsString() {
        // è¿”å›ç‰©å“åˆ—è¡¨å­—ç¬¦ä¸²
    }
}
```

#### 3.2.3 ç©å®¶ç³»ç»Ÿå®ç°

**å®ç°å†…å®¹**:
1. åˆ›å»ºç‹¬ç«‹çš„ `Player` ç±»
2. ç®¡ç†ç©å®¶å§“åã€ä½ç½®ã€ç‰©å“æ¸…å•ã€è´Ÿé‡é™åˆ¶
3. å®ç°ç‰©å“æ‹¾å–ã€ä¸¢å¼ƒåŠŸèƒ½ï¼ˆå¸¦è´Ÿé‡æ£€æŸ¥ï¼‰
4. è®°å½•æ¸¸æˆè¿›åº¦ï¼ˆè®¿é—®çš„æˆ¿é—´ã€æ”¶é›†çš„ç‰©å“ï¼‰

**å…³é”®ä»£ç **:
```java
public class Player {
    private String name;
    private Room currentRoom;
    private HashMap<String, Item> inventory;
    private double maxWeight;
    private Set<String> roomsVisited;
    private Set<String> itemsCollected;
    
    public boolean canCarry(Item item) {
        return (getTotalWeight() + item.getWeight()) <= maxWeight;
    }
    
    public void takeItem(Item item) {
        if (canCarry(item)) {
            inventory.put(item.getName().toLowerCase(), item);
            itemsCollected.add(item.getName().toLowerCase());
        }
    }
}
```

#### 3.2.4 å†å²è®°å½•å®ç°

**å®ç°å†…å®¹**:
1. åœ¨ Game ç±»ä¸­æ·»åŠ  `Stack<Room> roomHistory` å±æ€§
2. åœ¨ go å‘½ä»¤æ‰§è¡Œæ—¶è®°å½•æˆ¿é—´å†å²
3. å®ç° back å‘½ä»¤ï¼Œæ”¯æŒå¤šçº§å›é€€

**å…³é”®ä»£ç **:
```java
public class Game {
    private Stack<Room> roomHistory;
    
    public void addRoomToHistory(Room room) {
        roomHistory.push(room);
    }
    
    public Room getPreviousRoom() {
        if (roomHistory.isEmpty()) {
            return null;
        }
        return roomHistory.pop();
    }
}
```

---

## å››ã€åŠŸèƒ½æ‰©å±•å®ç°

### 4.1 åŠŸèƒ½æ‰©å±•æ€»è§ˆ

æœ¬é¡¹ç›®å®ç°äº†ä»¥ä¸‹ä¸»è¦åŠŸèƒ½æ‰©å±•ï¼š

1. âœ… **ç‰©å“ç³»ç»Ÿ** - æˆ¿é—´ç‰©å“å­˜å‚¨ã€ç‰©å“æ‹¾å–/ä¸¢å¼ƒ
2. âœ… **ç©å®¶ç³»ç»Ÿ** - ç‹¬ç«‹çš„Playerç±»ã€è´Ÿé‡ç®¡ç†
3. âœ… **backå‘½ä»¤** - å¤šçº§å›é€€åŠŸèƒ½
4. âœ… **é­”æ³•é¥¼å¹²ç³»ç»Ÿ** - ç‰¹æ®Šç‰©å“ã€å¢åŠ è´Ÿé‡
5. âœ… **ä¼ è¾“æˆ¿é—´** - éšæœºä¼ é€åŠŸèƒ½
6. âœ… **å‘½ä»¤æ¨¡å¼é‡æ„** - æ¶æ„æ”¹è¿›
7. âœ… **Webå‰ç«¯ç•Œé¢** - HTML/CSS/JavaScript
8. âœ… **æ•°æ®åº“æ”¯æŒ** - MySQLæ•°æ®åº“ã€ç”¨æˆ·ç³»ç»Ÿã€æ¸¸æˆçŠ¶æ€ä¿å­˜
9. âœ… **é€šå…³æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹æ¸¸æˆå®Œæˆæ¡ä»¶

### 4.2 è¯¦ç»†åŠŸèƒ½å®ç°

#### 4.2.1 ç‰©å“ç³»ç»Ÿ

**åŠŸèƒ½æè¿°**:
- æ¯ä¸ªæˆ¿é—´å¯ä»¥å­˜æ”¾ä»»æ„æ•°é‡çš„ç‰©å“
- æ¯ä¸ªç‰©å“æœ‰åç§°ã€æè¿°å’Œé‡é‡
- ç©å®¶å¯ä»¥é€šè¿‡ `look` å‘½ä»¤æŸ¥çœ‹æˆ¿é—´å†…çš„ç‰©å“
- ç©å®¶å¯ä»¥é€šè¿‡ `take` å‘½ä»¤æ‹¾å–ç‰©å“
- ç©å®¶å¯ä»¥é€šè¿‡ `drop` å‘½ä»¤ä¸¢å¼ƒç‰©å“

**å®ç°ç»†èŠ‚**:

1. **Itemç±»** (`Item.java`):
```java
public class Item {
    private String name;        // ç‰©å“åç§°
    private String description; // ç‰©å“æè¿°
    private double weight;     // ç‰©å“é‡é‡ï¼ˆåƒå…‹ï¼‰
    
    public Item(String name, String description, double weight) {
        this.name = name;
        this.description = description;
        this.weight = weight;
    }
    // ... getteræ–¹æ³•
}
```

2. **Roomç±»æ‰©å±•** (`Room.java`):
```java
public class Room {
    private HashMap<String, Item> items; // ç‰©å“æ˜ å°„è¡¨
    
    public void addItem(Item item) {
        items.put(item.getName().toLowerCase(), item);
    }
    
    public Item removeItem(String itemName) {
        return items.remove(itemName.toLowerCase());
    }
    
    public Item getItem(String itemName) {
        return items.get(itemName.toLowerCase());
    }
    
    public Collection<Item> getItems() {
        return items.values();
    }
    
    public String getItemsString() {
        // è¿”å›æ ¼å¼åŒ–çš„ç‰©å“åˆ—è¡¨å­—ç¬¦ä¸²
    }
    
    public double getTotalWeight() {
        // è®¡ç®—æˆ¿é—´å†…æ‰€æœ‰ç‰©å“çš„æ€»é‡é‡
    }
}
```

3. **æ¸¸æˆåˆå§‹åŒ–** (`Game.java`):
```java
private void createRooms() {
    // åˆ›å»ºæˆ¿é—´
    Room outside = new Room("å¤§å­¦ä¸»å…¥å£å¤–");
    
    // æ·»åŠ ç‰©å“åˆ°æˆ¿é—´
    outside.addItem(new Item("key", "ä¸€æŠŠç”Ÿé”ˆçš„æ—§é’¥åŒ™", 0.1));
    outside.addItem(new Item("map", "ä¸€å¼ æ ¡å›­åœ°å›¾", 0.2));
    
    // ... å…¶ä»–æˆ¿é—´
}
```

**æµ‹è¯•ç”¨ä¾‹**:
- æµ‹è¯•ç‰©å“æ·»åŠ å’Œç§»é™¤
- æµ‹è¯•ç‰©å“æŸ¥æ‰¾ï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰
- æµ‹è¯•æˆ¿é—´ç‰©å“åˆ—è¡¨æ˜¾ç¤º
- æµ‹è¯•ç‰©å“æ€»é‡é‡è®¡ç®—

#### 4.2.2 ç©å®¶ç³»ç»Ÿ

**åŠŸèƒ½æè¿°**:
- ç‹¬ç«‹çš„Playerç±»ç®¡ç†ç©å®¶ä¿¡æ¯
- ç©å®¶å¯ä»¥æºå¸¦ç‰©å“ï¼Œæœ‰è´Ÿé‡é™åˆ¶ï¼ˆåˆå§‹10kgï¼‰
- ç©å®¶å¯ä»¥æ‹¾å–å’Œä¸¢å¼ƒç‰©å“
- ç³»ç»Ÿä¼šæ£€æŸ¥è´Ÿé‡é™åˆ¶ï¼Œè¶…è¿‡é™åˆ¶æ— æ³•æ‹¾å–
- ç©å®¶å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„ç‰©å“æ¸…å•

**å®ç°ç»†èŠ‚**:

1. **Playerç±»** (`Player.java`):
```java
public class Player {
    private String name;                    // ç©å®¶å§“å
    private Room currentRoom;              // å½“å‰æ‰€åœ¨æˆ¿é—´
    private HashMap<String, Item> inventory; // ç‰©å“æ¸…å•
    private double maxWeight;               // æœ€å¤§è´Ÿé‡
    private Set<String> roomsVisited;       // å·²è®¿é—®çš„æˆ¿é—´
    private Set<String> itemsCollected;      // å·²æ”¶é›†çš„ç‰©å“
    private boolean cookieEaten;            // æ˜¯å¦åƒæ‰é­”æ³•é¥¼å¹²
    
    public Player(String name, double maxWeight) {
        this.name = name;
        this.maxWeight = maxWeight;
        this.inventory = new HashMap<>();
        this.roomsVisited = new HashSet<>();
        this.itemsCollected = new HashSet<>();
    }
    
    public boolean canCarry(Item item) {
        return (getTotalWeight() + item.getWeight()) <= maxWeight;
    }
    
    public void takeItem(Item item) {
        if (canCarry(item)) {
            inventory.put(item.getName().toLowerCase(), item);
            itemsCollected.add(item.getName().toLowerCase());
        }
    }
    
    public Item dropItem(String itemName) {
        Item item = inventory.remove(itemName.toLowerCase());
        return item;
    }
    
    public double getTotalWeight() {
        double total = 0.0;
        for (Item item : inventory.values()) {
            total += item.getWeight();
        }
        return total;
    }
    
    public String getInventoryString() {
        // è¿”å›æ ¼å¼åŒ–çš„ç‰©å“æ¸…å•å­—ç¬¦ä¸²
    }
}
```

2. **TakeCommandç±»** (`TakeCommand.java`):
```java
public class TakeCommand implements CommandExecutor {
    public String execute(Command command, Game game, Player player) {
        if (!command.hasSecondWord()) {
            return "æ‹¾å–ä»€ä¹ˆï¼Ÿ";
        }
        
        String itemName = command.getSecondWord();
        Room currentRoom = player.getCurrentRoom();
        Item item = currentRoom.getItem(itemName);
        
        if (item == null) {
            return "è¿™é‡Œæ²¡æœ‰ " + itemName + "ï¼";
        }
        
        if (!player.canCarry(item)) {
            return "ä½ æ— æ³•æºå¸¦ " + item.getName() + 
                   "ã€‚å®ƒé‡ " + item.getWeight() + "kgï¼Œ" +
                   "ä½†ä½ åªèƒ½å†æºå¸¦ " + 
                   (player.getMaxWeight() - player.getTotalWeight()) + "kgã€‚";
        }
        
        currentRoom.removeItem(itemName);
        player.takeItem(item);
        return "ä½ æ‹¾å–äº† " + item.getName() + "ã€‚";
    }
}
```

**æµ‹è¯•ç”¨ä¾‹**:
- æµ‹è¯•ç©å®¶åˆ›å»ºå’Œåˆå§‹åŒ–
- æµ‹è¯•ç‰©å“æ‹¾å–ï¼ˆæ­£å¸¸æƒ…å†µï¼‰
- æµ‹è¯•ç‰©å“æ‹¾å–ï¼ˆè¶…è¿‡è´Ÿé‡ï¼‰
- æµ‹è¯•ç‰©å“ä¸¢å¼ƒ
- æµ‹è¯•è´Ÿé‡è®¡ç®—
- æµ‹è¯•ç‰©å“æ¸…å•æ˜¾ç¤º

#### 4.2.3 backå‘½ä»¤ï¼ˆå¤šçº§å›é€€ï¼‰

**åŠŸèƒ½æè¿°**:
- å®ç° `back` å‘½ä»¤ï¼Œè¿”å›ä¸Šä¸€ä¸ªæˆ¿é—´
- æ”¯æŒå¤šæ¬¡ä½¿ç”¨ï¼Œé€å±‚å›é€€åˆ°èµ·ç‚¹
- ä½¿ç”¨æ ˆç»“æ„è®°å½•æˆ¿é—´å†å²

**å®ç°ç»†èŠ‚**:

1. **Gameç±»æ‰©å±•** (`Game.java`):
```java
public class Game {
    private Stack<Room> roomHistory; // æˆ¿é—´å†å²æ ˆ
    
    public Game() {
        roomHistory = new Stack<>();
        // ... å…¶ä»–åˆå§‹åŒ–
    }
    
    public void addRoomToHistory(Room room) {
        roomHistory.push(room);
    }
    
    public Room getPreviousRoom() {
        if (roomHistory.isEmpty()) {
            return null; // å·²åˆ°è¾¾èµ·ç‚¹
        }
        return roomHistory.pop();
    }
}
```

2. **GoCommandç±»** (`GoCommand.java`):
```java
public class GoCommand implements CommandExecutor {
    public String execute(Command command, Game game, Player player) {
        if (!command.hasSecondWord()) {
            return "å»å“ªé‡Œï¼Ÿ";
        }
        
        String direction = command.getSecondWord();
        Room currentRoom = player.getCurrentRoom();
        Room nextRoom = currentRoom.getExit(direction);
        
        if (nextRoom == null) {
            return "é‚£é‡Œæ²¡æœ‰é—¨ï¼";
        }
        
        // è®°å½•å½“å‰æˆ¿é—´åˆ°å†å²æ ˆ
        game.addRoomToHistory(currentRoom);
        
        // ç§»åŠ¨åˆ°æ–°æˆ¿é—´
        player.setCurrentRoom(nextRoom);
        
        // è®°å½•æˆ¿é—´è®¿é—®
        player.addRoomVisited(nextRoom.getShortDescription());
        
        return nextRoom.getLongDescription();
    }
}
```

3. **BackCommandç±»** (`BackCommand.java`):
```java
public class BackCommand implements CommandExecutor {
    public String execute(Command command, Game game, Player player) {
        Room previousRoom = game.getPreviousRoom();
        
        if (previousRoom == null) {
            return "ä½ å·²ç»å›åˆ°äº†èµ·ç‚¹ï¼";
        }
        
        player.setCurrentRoom(previousRoom);
        return "ä½ è¿”å›åˆ°: " + previousRoom.getLongDescription();
    }
}
```

**æµ‹è¯•ç”¨ä¾‹**:
- æµ‹è¯•å•æ¬¡backå‘½ä»¤
- æµ‹è¯•å¤šæ¬¡backå‘½ä»¤ï¼ˆå¤šçº§å›é€€ï¼‰
- æµ‹è¯•backåˆ°èµ·ç‚¹
- æµ‹è¯•backåå†æ¬¡goçš„è®°å½•

#### 4.2.4 é­”æ³•é¥¼å¹²ç³»ç»Ÿ

**åŠŸèƒ½æè¿°**:
- åœ¨éšæœºæˆ¿é—´æ”¾ç½®é­”æ³•é¥¼å¹²ï¼ˆcookieï¼‰
- ç©å®¶å¯ä»¥æ‹¾å–é­”æ³•é¥¼å¹²
- ä½¿ç”¨ `eat cookie` å‘½ä»¤åƒæ‰é¥¼å¹²
- åƒæ‰é¥¼å¹²åï¼Œç©å®¶çš„æœ€å¤§è´Ÿé‡å¢åŠ 5kg

**å®ç°ç»†èŠ‚**:

1. **æ¸¸æˆåˆå§‹åŒ–** (`Game.java`):
```java
private void createRooms() {
    // ... åˆ›å»ºæˆ¿é—´
    
    // éšæœºé€‰æ‹©ä¸€ä¸ªæˆ¿é—´æ”¾ç½®é­”æ³•é¥¼å¹²
    Random random = new Random();
    List<Room> rooms = new ArrayList<>(allRoomsMap.values());
    Room cookieRoom = rooms.get(random.nextInt(rooms.size()));
    cookieRoom.addItem(new Item("cookie", "ä¸€å—é­”æ³•é¥¼å¹²", 0.1));
}
```

2. **EatCookieCommandç±»** (`EatCookieCommand.java`):
```java
public class EatCookieCommand implements CommandExecutor {
    public String execute(Command command, Game game, Player player) {
        if (!command.hasSecondWord() || !command.getSecondWord().equals("cookie")) {
            return "åƒä»€ä¹ˆï¼Ÿ";
        }
        
        Item cookie = player.getItem("cookie");
        if (cookie == null) {
            return "ä½ æ²¡æœ‰é­”æ³•é¥¼å¹²ï¼";
        }
        
        // åƒæ‰é¥¼å¹²
        player.eatCookie(); // è®¾ç½®cookieEatenæ ‡å¿—å¹¶ç§»é™¤ç‰©å“
        player.increaseMaxWeight(5.0); // å¢åŠ 5kgæœ€å¤§è´Ÿé‡
        
        return "ä½ åƒæ‰äº†é­”æ³•é¥¼å¹²ã€‚ä½ çš„è´Ÿé‡èƒ½åŠ›å¢åŠ äº†5kgï¼\n" +
               "æ–°çš„æœ€å¤§è´Ÿé‡: " + player.getMaxWeight() + "kg";
    }
}
```

3. **Playerç±»æ‰©å±•** (`Player.java`):
```java
public class Player {
    private boolean cookieEaten;
    
    public void eatCookie() {
        Item cookie = inventory.remove("cookie");
        if (cookie != null) {
            cookieEaten = true;
        }
    }
    
    public void increaseMaxWeight(double amount) {
        maxWeight += amount;
    }
    
    public boolean isCookieEaten() {
        return cookieEaten;
    }
}
```

**æµ‹è¯•ç”¨ä¾‹**:
- æµ‹è¯•é­”æ³•é¥¼å¹²éšæœºæ”¾ç½®
- æµ‹è¯•æ‹¾å–é­”æ³•é¥¼å¹²
- æµ‹è¯•åƒæ‰é­”æ³•é¥¼å¹²
- æµ‹è¯•è´Ÿé‡å¢åŠ 
- æµ‹è¯•é‡å¤åƒæ‰é¥¼å¹²ï¼ˆåº”è¯¥å¤±è´¥ï¼‰

#### 4.2.5 ä¼ è¾“æˆ¿é—´åŠŸèƒ½

**åŠŸèƒ½æè¿°**:
- åˆ›å»ºç‰¹æ®Šçš„ä¼ è¾“æˆ¿é—´ï¼ˆTransporterRoomï¼‰
- è¿›å…¥ä¼ è¾“æˆ¿é—´åï¼Œç©å®¶ä¼šè¢«éšæœºä¼ é€åˆ°å…¶ä»–æˆ¿é—´
- å¢åŠ æ¸¸æˆçš„è¶£å‘³æ€§å’ŒæŒ‘æˆ˜æ€§

**å®ç°ç»†èŠ‚**:

1. **TransporterRoomç±»** (`TransporterRoom.java`):
```java
public class TransporterRoom extends Room {
    private HashMap<String, Room> allRooms;
    private Random random;
    
    public TransporterRoom(String description, HashMap<String, Room> allRooms) {
        super(description);
        this.allRooms = allRooms;
        this.random = new Random();
    }
    
    @Override
    public Room getExit(String direction) {
        // é‡å†™getExitæ–¹æ³•ï¼Œè¿”å›éšæœºæˆ¿é—´
        return getRandomRoom();
    }
    
    public Room getRandomRoom() {
        // è·å–æ‰€æœ‰æˆ¿é—´ï¼ˆæ’é™¤ä¼ è¾“æˆ¿é—´æœ¬èº«ï¼‰
        List<Room> availableRooms = new ArrayList<>();
        for (Room room : allRooms.values()) {
            if (room != this) {
                availableRooms.add(room);
            }
        }
        
        if (availableRooms.isEmpty()) {
            return null;
        }
        
        // éšæœºé€‰æ‹©ä¸€ä¸ªæˆ¿é—´
        return availableRooms.get(random.nextInt(availableRooms.size()));
    }
}
```

2. **æ¸¸æˆåˆå§‹åŒ–** (`Game.java`):
```java
private void createRooms() {
    // ... åˆ›å»ºæ™®é€šæˆ¿é—´
    
    // åˆ›å»ºä¼ è¾“æˆ¿é—´
    transporter = new TransporterRoom("ä¸€ä¸ªç¥ç§˜çš„ä¼ è¾“æˆ¿é—´", allRoomsMap);
    allRoomsMap.put("transporter", transporter);
    
    // ä»èµ·å§‹æˆ¿é—´çš„åŒ—é¢å¯ä»¥è¿›å…¥ä¼ è¾“æˆ¿é—´
    outside.setExit("north", transporter);
}
```

3. **GoCommandå¤„ç†ä¼ è¾“æˆ¿é—´** (`GoCommand.java`):
```java
public class GoCommand implements CommandExecutor {
    public String execute(Command command, Game game, Player player) {
        // ... ç§»åŠ¨é€»è¾‘
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯ä¼ è¾“æˆ¿é—´
        if (nextRoom instanceof TransporterRoom) {
            TransporterRoom transporter = (TransporterRoom) nextRoom;
            Room randomRoom = transporter.getRandomRoom();
            if (randomRoom != null) {
                output.append("ä½ è¸å…¥äº†ä¸€ä¸ªç¥ç§˜çš„ä¼ è¾“æˆ¿é—´...\n");
                output.append("çªç„¶ï¼Œä½ è¢«ä¼ é€åˆ°å¦ä¸€ä¸ªä½ç½®ï¼\n");
                player.setCurrentRoom(randomRoom);
            }
        }
        
        return output.toString();
    }
}
```

**æµ‹è¯•ç”¨ä¾‹**:
- æµ‹è¯•ä¼ è¾“æˆ¿é—´åˆ›å»º
- æµ‹è¯•è¿›å…¥ä¼ è¾“æˆ¿é—´
- æµ‹è¯•éšæœºä¼ é€åŠŸèƒ½
- æµ‹è¯•ä¸ä¼šä¼ é€åˆ°ä¼ è¾“æˆ¿é—´æœ¬èº«

#### 4.2.6 Webå‰ç«¯ç•Œé¢

**åŠŸèƒ½æè¿°**:
- åˆ›å»ºåŸºäºHTML/CSS/JavaScriptçš„Webå‰ç«¯
- å®ç°ç»å…¸åƒç´ é£æ ¼çš„æ¸¸æˆç•Œé¢
- æä¾›REST APIæ¥å£
- æ”¯æŒå“åº”å¼è®¾è®¡

**å®ç°ç»†èŠ‚**:

1. **HTMLç»“æ„** (`web/index.html`):
```html
<!DOCTYPE html>
<html>
<head>
    <title>World of Zuul</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar">
        <!-- é¡¶éƒ¨å¯¼èˆªæ ï¼šæ˜¾ç¤ºæ¸¸æˆçŠ¶æ€ -->
    </nav>
    
    <div class="output-area" id="output">
        <!-- æ¸¸æˆè¾“å‡ºåŒºåŸŸ -->
    </div>
    
    <div class="command-section">
        <input type="text" id="commandInput" placeholder="è¾“å…¥å‘½ä»¤...">
        <button onclick="executeCommand()">æ‰§è¡Œ</button>
    </div>
    
    <div class="quick-commands">
        <!-- å¿«é€Ÿå‘½ä»¤æŒ‰é’® -->
    </div>
    
    <script src="game.js"></script>
</body>
</html>
```

2. **JavaScripté€»è¾‘** (`web/game.js`):
```javascript
// APIåŸºç¡€URL
let API_BASE_URL = window.location.origin;
let sessionId = null;

// æ‰§è¡Œå‘½ä»¤
async function executeCommand() {
    const command = document.getElementById('commandInput').value.trim();
    if (!command) return;
    
    const url = buildApiUrl('command');
    const body = JSON.stringify({
        command: command,
        sessionId: sessionId
    });
    
    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: body
        });
        
        const data = await response.json();
        displayMessage(data.message);
        
        if (data.sessionId) {
            sessionId = data.sessionId;
        }
        
        // æ›´æ–°æ¸¸æˆçŠ¶æ€
        loadGameState();
    } catch (error) {
        displayMessage('é”™è¯¯: ' + error.message);
    }
}

// åŠ è½½æ¸¸æˆçŠ¶æ€
async function loadGameState() {
    const url = buildApiUrl('status') + (sessionId ? '?sessionId=' + sessionId : '');
    
    try {
        const response = await fetch(url);
        const data = await response.json();
        
        // æ›´æ–°UI
        updateUI(data);
    } catch (error) {
        console.error('åŠ è½½æ¸¸æˆçŠ¶æ€å¤±è´¥:', error);
    }
}
```

3. **CSSæ ·å¼** (`web/style.css`):
```css
/* ç»å…¸åƒç´ é£æ ¼ */
body {
    background-color: #1a1a1a;
    color: #e0e0e0;
    font-family: 'Courier New', monospace;
}

.navbar {
    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    padding: 15px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.3);
}

.output-area {
    background-color: #0d1117;
    border: 2px solid #30363d;
    padding: 20px;
    height: 400px;
    overflow-y: auto;
    font-family: 'Courier New', monospace;
}
```

**æµ‹è¯•ç”¨ä¾‹**:
- æµ‹è¯•é¡µé¢åŠ è½½
- æµ‹è¯•å‘½ä»¤æ‰§è¡Œ
- æµ‹è¯•æ¸¸æˆçŠ¶æ€æ›´æ–°
- æµ‹è¯•ç™»å½•/æ³¨å†ŒåŠŸèƒ½
- æµ‹è¯•å“åº”å¼å¸ƒå±€

#### 4.2.7 æ•°æ®åº“æ”¯æŒ

**åŠŸèƒ½æè¿°**:
- ä½¿ç”¨MySQLæ•°æ®åº“å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
- æ”¯æŒç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- æ”¯æŒæ¸¸æˆçŠ¶æ€ä¿å­˜å’ŒåŠ è½½
- è®°å½•æ¸¸æˆè¿›åº¦å’Œé€šå…³çŠ¶æ€

**å®ç°ç»†èŠ‚**:

1. **æ•°æ®åº“è¡¨ç»“æ„**:
```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP NULL
);

-- æ¸¸æˆè®°å½•è¡¨
CREATE TABLE game_records (
    record_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    start_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    end_time TIMESTAMP NULL,
    is_completed BOOLEAN DEFAULT FALSE,
    rooms_explored INT DEFAULT 0,
    items_collected INT DEFAULT 0,
    cookie_eaten BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- ç©å®¶çŠ¶æ€è¡¨
CREATE TABLE player_states (
    state_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    current_room VARCHAR(50) NOT NULL,
    max_weight DOUBLE DEFAULT 10.0,
    inventory TEXT,
    rooms_visited TEXT,
    items_collected_list TEXT,
    cookie_eaten BOOLEAN DEFAULT FALSE,
    saved_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id),
    UNIQUE KEY unique_user_state (user_id)
);
```

2. **DatabaseManagerç±»** (`DatabaseManager.java`):
```java
public class DatabaseManager {
    private static final String DB_URL = "jdbc:mysql://localhost:3306/zuul_game?...";
    private static final String DB_USER = "shellykoi";
    private static final String DB_PASSWORD = "123456koiii";
    
    private static DatabaseManager instance;
    private Connection connection;
    
    public static synchronized DatabaseManager getInstance() {
        if (instance == null) {
            instance = new DatabaseManager();
        }
        return instance;
    }
    
    public boolean registerUser(String username, String password) {
        // æ³¨å†Œæ–°ç”¨æˆ·
    }
    
    public Integer loginUser(String username, String password) {
        // éªŒè¯ç”¨æˆ·ç™»å½•
    }
    
    public boolean savePlayerState(int userId, String currentRoom, 
                                   double maxWeight, List<String> inventory, ...) {
        // ä¿å­˜æ¸¸æˆçŠ¶æ€
    }
    
    public Map<String, Object> loadPlayerState(int userId) {
        // åŠ è½½æ¸¸æˆçŠ¶æ€
    }
}
```

3. **GameStateManagerç±»** (`GameStateManager.java`):
```java
public class GameStateManager {
    private Game game;
    private DatabaseManager dbManager;
    
    public boolean saveGameState() {
        Player player = game.getPlayer();
        if (player.getUserId() == null) {
            return false;
        }
        
        // æ”¶é›†æ¸¸æˆçŠ¶æ€æ•°æ®
        String currentRoom = player.getCurrentRoom().getShortDescription();
        double maxWeight = player.getMaxWeight();
        List<String> inventory = ...;
        List<String> roomsVisited = ...;
        List<String> itemsCollected = ...;
        boolean cookieEaten = player.isCookieEaten();
        
        // ä¿å­˜åˆ°æ•°æ®åº“
        return dbManager.savePlayerState(
            player.getUserId(), currentRoom, maxWeight,
            inventory, roomsVisited, itemsCollected, cookieEaten
        );
    }
    
    public boolean loadGameState() {
        // ä»æ•°æ®åº“åŠ è½½æ¸¸æˆçŠ¶æ€
    }
}
```

**æµ‹è¯•ç”¨ä¾‹**:
- æµ‹è¯•æ•°æ®åº“è¿æ¥
- æµ‹è¯•ç”¨æˆ·æ³¨å†Œ
- æµ‹è¯•ç”¨æˆ·ç™»å½•
- æµ‹è¯•æ¸¸æˆçŠ¶æ€ä¿å­˜
- æµ‹è¯•æ¸¸æˆçŠ¶æ€åŠ è½½
- æµ‹è¯•æ¸¸æˆè®°å½•åˆ›å»ºå’Œæ›´æ–°

#### 4.2.8 é€šå…³æ£€æµ‹ç³»ç»Ÿ

**åŠŸèƒ½æè¿°**:
- è‡ªåŠ¨æ£€æµ‹æ¸¸æˆå®Œæˆæ¡ä»¶
- æ˜¾ç¤ºæ¸¸æˆè¿›åº¦
- é€šå…³æ—¶æ˜¾ç¤ºèƒœåˆ©æ¶ˆæ¯

**å®ç°ç»†èŠ‚**:

1. **GameCompletionCheckerç±»** (`GameCompletionChecker.java`):
```java
public class GameCompletionChecker {
    public static class CompletionInfo {
        private boolean completed;
        private boolean atStartRoom;
        private int roomsExplored;
        private int totalRooms;
        private boolean allRoomsExplored;
        private int itemsCollected;
        private int totalItems;
        private boolean allItemsCollected;
        private boolean cookieEaten;
        
        // ... getteræ–¹æ³•
    }
    
    public static CompletionInfo checkCompletion(Player player) {
        CompletionInfo info = new CompletionInfo();
        
        // æ£€æŸ¥æ˜¯å¦åœ¨èµ·å§‹æˆ¿é—´
        info.setAtStartRoom(player.getCurrentRoom().getShortDescription().equals("å¤§å­¦ä¸»å…¥å£å¤–"));
        
        // æ£€æŸ¥æˆ¿é—´æ¢ç´¢è¿›åº¦
        info.setRoomsExplored(player.getRoomsVisited().size());
        info.setTotalRooms(6); // æ€»å…±6ä¸ªæˆ¿é—´
        info.setAllRoomsExplored(info.getRoomsExplored() >= info.getTotalRooms());
        
        // æ£€æŸ¥ç‰©å“æ”¶é›†è¿›åº¦
        info.setItemsCollected(player.getItemsCollected().size());
        info.setTotalItems(8); // æ€»å…±8ä¸ªç‰©å“
        info.setAllItemsCollected(info.getItemsCollected() >= info.getTotalItems());
        
        // æ£€æŸ¥æ˜¯å¦åƒæ‰é­”æ³•é¥¼å¹²
        info.setCookieEaten(player.isCookieEaten());
        
        // åˆ¤æ–­æ˜¯å¦é€šå…³
        info.setCompleted(
            info.isAtStartRoom() &&
            info.isAllRoomsExplored() &&
            info.isAllItemsCollected() &&
            info.isCookieEaten()
        );
        
        return info;
    }
}
```

2. **StatusCommandç±»** (`StatusCommand.java`):
```java
public class StatusCommand implements CommandExecutor {
    public String execute(Command command, Game game, Player player) {
        GameCompletionChecker.CompletionInfo info = 
            GameCompletionChecker.checkCompletion(player);
        
        StringBuilder output = new StringBuilder();
        output.append("=== æ¸¸æˆè¿›åº¦ ===\n");
        output.append("æˆ¿é—´æ¢ç´¢: ").append(info.getRoomsExplored())
              .append("/").append(info.getTotalRooms()).append("\n");
        output.append("ç‰©å“æ”¶é›†: ").append(info.getItemsCollected())
              .append("/").append(info.getTotalItems()).append("\n");
        output.append("é­”æ³•é¥¼å¹²: ").append(info.isCookieEaten() ? "å·²åƒ" : "æœªåƒ").append("\n");
        output.append("å½“å‰ä½ç½®: ").append(info.isAtStartRoom() ? "èµ·å§‹æˆ¿é—´" : "å…¶ä»–æˆ¿é—´").append("\n");
        
        if (info.isCompleted()) {
            output.append("\nğŸ‰ æ­å–œï¼ä½ å·²å®Œæˆæ‰€æœ‰ä»»åŠ¡ï¼Œæ¸¸æˆé€šå…³ï¼");
        }
        
        return output.toString();
    }
}
```

**æµ‹è¯•ç”¨ä¾‹**:
- æµ‹è¯•é€šå…³æ¡ä»¶æ£€æµ‹
- æµ‹è¯•è¿›åº¦æ˜¾ç¤º
- æµ‹è¯•é€šå…³æç¤º
- æµ‹è¯•å„ç§æœªå®ŒæˆçŠ¶æ€

---

## äº”ã€å•å…ƒæµ‹è¯•ç”¨ä¾‹

### 5.1 æµ‹è¯•æ¡†æ¶å’Œå®ç°æ–¹å¼

#### 5.1.1 æµ‹è¯•æ¡†æ¶é€‰æ‹©

æœ¬é¡¹ç›®é‡‡ç”¨**åŸºäºJavaæ ‡å‡†åº“çš„è½»é‡çº§æµ‹è¯•æ¡†æ¶**å®ç°å•å…ƒæµ‹è¯•ï¼Œæ— éœ€é¢å¤–çš„æµ‹è¯•æ¡†æ¶ä¾èµ–ï¼ˆå¦‚JUnitï¼‰ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œã€‚

**å®ç°åŸç†**:
- æ¯ä¸ªæµ‹è¯•ç±»åŒ…å«å¤šä¸ªé™æ€æµ‹è¯•æ–¹æ³•
- æ¯ä¸ªæµ‹è¯•æ–¹æ³•è¿”å›`boolean`å€¼è¡¨ç¤ºæµ‹è¯•æ˜¯å¦é€šè¿‡
- æä¾›ç»Ÿä¸€çš„æµ‹è¯•è¿è¡Œå™¨ï¼ˆ`TestRunner`ï¼‰æ‰§è¡Œæ‰€æœ‰æµ‹è¯•
- æµ‹è¯•ç»“æœä»¥æ§åˆ¶å°è¾“å‡ºçš„å½¢å¼å±•ç¤º

**ä¼˜åŠ¿**:
- âœ… æ— éœ€é¢å¤–ä¾èµ–ï¼Œé¡¹ç›®å¯ç›´æ¥è¿è¡Œæµ‹è¯•
- âœ… æµ‹è¯•ä»£ç ç®€æ´æ˜“æ‡‚ï¼Œä¾¿äºç»´æŠ¤
- âœ… æµ‹è¯•ç»“æœæ¸…æ™°ç›´è§‚ï¼ŒåŒ…å«è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- âœ… æ”¯æŒæ‰¹é‡è¿è¡Œå’Œæ±‡æ€»ç»Ÿè®¡

#### 5.1.2 æµ‹è¯•ç›®å½•ç»“æ„

```
test/
â””â”€â”€ cn/
    â””â”€â”€ edu/
        â””â”€â”€ whut/
            â””â”€â”€ sept/
                â””â”€â”€ zuul/
                    â”œâ”€â”€ ItemTest.java          # ç‰©å“ç±»æµ‹è¯•
                    â”œâ”€â”€ RoomTest.java          # æˆ¿é—´ç±»æµ‹è¯•
                    â”œâ”€â”€ PlayerTest.java        # ç©å®¶ç±»æµ‹è¯•
                    â”œâ”€â”€ CommandTest.java       # å‘½ä»¤ç±»æµ‹è¯•
                    â”œâ”€â”€ GoCommandTest.java     # ç§»åŠ¨å‘½ä»¤æµ‹è¯•
                    â”œâ”€â”€ TakeCommandTest.java   # æ‹¾å–å‘½ä»¤æµ‹è¯•
                    â”œâ”€â”€ BackCommandTest.java   # å›é€€å‘½ä»¤æµ‹è¯•
                    â””â”€â”€ TestRunner.java        # æµ‹è¯•è¿è¡Œå™¨
```

#### 5.1.3 æµ‹è¯•ç±»ç»“æ„

æ¯ä¸ªæµ‹è¯•ç±»éµå¾ªç»Ÿä¸€çš„æ¨¡å¼ï¼š

```java
public class XxxTest {
    /**
     * è¿è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
     * @return æµ‹è¯•é€šè¿‡è¿”å›trueï¼Œå¤±è´¥è¿”å›false
     */
    public static boolean runAllTests() {
        // åˆå§‹åŒ–è®¡æ•°å™¨
        int passed = 0;
        int failed = 0;
        
        // è¿è¡Œå„ä¸ªæµ‹è¯•ç”¨ä¾‹
        if (testCase1()) {
            System.out.println("âœ… æµ‹è¯•1: ... - é€šè¿‡");
            passed++;
        } else {
            System.out.println("âŒ æµ‹è¯•1: ... - å¤±è´¥");
            failed++;
        }
        
        // ... æ›´å¤šæµ‹è¯•ç”¨ä¾‹
        
        // è¾“å‡ºæµ‹è¯•ç»“æœ
        System.out.println("æµ‹è¯•ç»“æœ: " + passed + " é€šè¿‡, " + failed + " å¤±è´¥");
        return failed == 0;
    }
    
    /**
     * æµ‹è¯•ç”¨ä¾‹1: å…·ä½“æµ‹è¯•å†…å®¹
     */
    private static boolean testCase1() {
        try {
            // æµ‹è¯•é€»è¾‘
            // éªŒè¯ç»“æœ
            return true;  // æˆ– false
        } catch (Exception e) {
            System.out.println("  å¼‚å¸¸: " + e.getMessage());
            return false;
        }
    }
}
```

### 5.2 æµ‹è¯•ç”¨ä¾‹è¯¦ç»†è¯´æ˜

#### 5.2.1 Itemç±»æµ‹è¯•

**æµ‹è¯•ç”¨ä¾‹1: ç‰©å“åˆ›å»º**
```java
@Test
public void testItemCreation() {
    Item item = new Item("key", "ä¸€æŠŠé’¥åŒ™", 0.1);
    assertEquals("key", item.getName());
    assertEquals("ä¸€æŠŠé’¥åŒ™", item.getDescription());
    assertEquals(0.1, item.getWeight(), 0.001);
}
```

**æµ‹è¯•ç”¨ä¾‹2: ç‰©å“toStringæ–¹æ³•**
```java
@Test
public void testItemToString() {
    Item item = new Item("map", "ä¸€å¼ åœ°å›¾", 0.2);
    String str = item.toString();
    assertTrue(str.contains("map"));
    assertTrue(str.contains("ä¸€å¼ åœ°å›¾"));
    assertTrue(str.contains("0.2"));
}
```

#### 5.2.2 Roomç±»æµ‹è¯•

**æµ‹è¯•ç”¨ä¾‹1: æˆ¿é—´ç‰©å“æ·»åŠ å’Œç§»é™¤**
```java
@Test
public void testAddAndRemoveItem() {
    Room room = new Room("æµ‹è¯•æˆ¿é—´");
    Item item = new Item("test", "æµ‹è¯•ç‰©å“", 1.0);
    
    room.addItem(item);
    assertEquals(1, room.getItems().size());
    
    Item removed = room.removeItem("test");
    assertNotNull(removed);
    assertEquals("test", removed.getName());
    assertEquals(0, room.getItems().size());
}
```

**æµ‹è¯•ç”¨ä¾‹2: æˆ¿é—´ç‰©å“æŸ¥æ‰¾ï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰**
```java
@Test
public void testGetItemCaseInsensitive() {
    Room room = new Room("æµ‹è¯•æˆ¿é—´");
    Item item = new Item("Key", "é’¥åŒ™", 0.1);
    room.addItem(item);
    
    Item found1 = room.getItem("key");
    Item found2 = room.getItem("KEY");
    Item found3 = room.getItem("Key");
    
    assertNotNull(found1);
    assertNotNull(found2);
    assertNotNull(found3);
    assertEquals(item, found1);
}
```

**æµ‹è¯•ç”¨ä¾‹3: æˆ¿é—´æ€»é‡é‡è®¡ç®—**
```java
@Test
public void testTotalWeight() {
    Room room = new Room("æµ‹è¯•æˆ¿é—´");
    room.addItem(new Item("item1", "ç‰©å“1", 1.0));
    room.addItem(new Item("item2", "ç‰©å“2", 2.0));
    room.addItem(new Item("item3", "ç‰©å“3", 0.5));
    
    assertEquals(3.5, room.getTotalWeight(), 0.001);
}
```

#### 5.2.3 Playerç±»æµ‹è¯•

**æµ‹è¯•ç”¨ä¾‹1: ç©å®¶åˆ›å»ºå’Œåˆå§‹åŒ–**
```java
@Test
public void testPlayerCreation() {
    Player player = new Player("TestPlayer", 10.0);
    assertEquals("TestPlayer", player.getName());
    assertEquals(10.0, player.getMaxWeight(), 0.001);
    assertEquals(0.0, player.getTotalWeight(), 0.001);
    assertEquals(0, player.getInventory().size());
}
```

**æµ‹è¯•ç”¨ä¾‹2: ç‰©å“æ‹¾å–ï¼ˆæ­£å¸¸æƒ…å†µï¼‰**
```java
@Test
public void testTakeItemSuccess() {
    Player player = new Player("TestPlayer", 10.0);
    Item item = new Item("test", "æµ‹è¯•ç‰©å“", 5.0);
    
    player.takeItem(item);
    assertEquals(1, player.getInventory().size());
    assertEquals(5.0, player.getTotalWeight(), 0.001);
    assertTrue(player.getItemsCollected().contains("test"));
}
```

**æµ‹è¯•ç”¨ä¾‹3: ç‰©å“æ‹¾å–ï¼ˆè¶…è¿‡è´Ÿé‡ï¼‰**
```java
@Test
public void testTakeItemExceedsWeight() {
    Player player = new Player("TestPlayer", 10.0);
    player.takeItem(new Item("item1", "ç‰©å“1", 6.0));
    
    Item heavyItem = new Item("heavy", "é‡ç‰©", 5.0);
    assertFalse(player.canCarry(heavyItem));
    
    // å°è¯•æ‹¾å–åº”è¯¥å¤±è´¥ï¼ˆä¸ä¼šæ·»åŠ åˆ°èƒŒåŒ…ï¼‰
    int beforeSize = player.getInventory().size();
    player.takeItem(heavyItem);
    assertEquals(beforeSize, player.getInventory().size());
}
```

**æµ‹è¯•ç”¨ä¾‹4: ç‰©å“ä¸¢å¼ƒ**
```java
@Test
public void testDropItem() {
    Player player = new Player("TestPlayer", 10.0);
    Item item = new Item("test", "æµ‹è¯•ç‰©å“", 2.0);
    player.takeItem(item);
    
    Item dropped = player.dropItem("test");
    assertNotNull(dropped);
    assertEquals("test", dropped.getName());
    assertEquals(0, player.getInventory().size());
    assertEquals(0.0, player.getTotalWeight(), 0.001);
}
```

**æµ‹è¯•ç”¨ä¾‹5: é­”æ³•é¥¼å¹²åŠŸèƒ½**
```java
@Test
public void testEatCookie() {
    Player player = new Player("TestPlayer", 10.0);
    Item cookie = new Item("cookie", "é­”æ³•é¥¼å¹²", 0.1);
    player.takeItem(cookie);
    
    assertEquals(10.0, player.getMaxWeight(), 0.001);
    assertFalse(player.isCookieEaten());
    
    player.eatCookie();
    player.increaseMaxWeight(5.0);
    
    assertTrue(player.isCookieEaten());
    assertEquals(15.0, player.getMaxWeight(), 0.001);
    assertFalse(player.getInventory().containsKey("cookie"));
}
```

#### 5.2.4 å‘½ä»¤æ¨¡å¼æµ‹è¯•

**æµ‹è¯•ç”¨ä¾‹1: GoCommandæ‰§è¡Œ**
```java
@Test
public void testGoCommand() {
    Game game = new Game();
    Player player = game.getPlayer();
    Room startRoom = player.getCurrentRoom();
    
    GoCommand goCommand = new GoCommand();
    Command command = new Command("go", "north");
    
    String result = goCommand.execute(command, game, player);
    
    assertNotEquals(startRoom, player.getCurrentRoom());
    assertTrue(result.contains(player.getCurrentRoom().getShortDescription()));
}
```

**æµ‹è¯•ç”¨ä¾‹2: TakeCommandæ‰§è¡Œ**
```java
@Test
public void testTakeCommand() {
    Game game = new Game();
    Player player = game.getPlayer();
    Room currentRoom = player.getCurrentRoom();
    
    // ç¡®ä¿æˆ¿é—´æœ‰ç‰©å“
    currentRoom.addItem(new Item("test", "æµ‹è¯•ç‰©å“", 1.0));
    
    TakeCommand takeCommand = new TakeCommand();
    Command command = new Command("take", "test");
    
    String result = takeCommand.execute(command, game, player);
    
    assertTrue(result.contains("æ‹¾å–äº†"));
    assertTrue(player.getInventory().containsKey("test"));
    assertFalse(currentRoom.getItems().contains(...));
}
```

**æµ‹è¯•ç”¨ä¾‹3: BackCommandæ‰§è¡Œ**
```java
@Test
public void testBackCommand() {
    Game game = new Game();
    Player player = game.getPlayer();
    Room startRoom = player.getCurrentRoom();
    
    // å…ˆç§»åŠ¨åˆ°ä¸€ä¸ªæˆ¿é—´
    GoCommand goCommand = new GoCommand();
    goCommand.execute(new Command("go", "north"), game, player);
    Room newRoom = player.getCurrentRoom();
    
    // æ‰§è¡Œbackå‘½ä»¤
    BackCommand backCommand = new BackCommand();
    String result = backCommand.execute(new Command("back", null), game, player);
    
    assertEquals(startRoom, player.getCurrentRoom());
    assertTrue(result.contains("è¿”å›åˆ°"));
}
```

#### 5.2.5 æ¸¸æˆæµç¨‹æµ‹è¯•

**æµ‹è¯•ç”¨ä¾‹1: å®Œæ•´æ¸¸æˆæµç¨‹**
```java
@Test
public void testCompleteGameFlow() {
    Game game = new Game();
    Player player = game.getPlayer();
    
    // 1. æŸ¥çœ‹å½“å‰æˆ¿é—´
    LookCommand look = new LookCommand();
    String lookResult = look.execute(new Command("look", null), game, player);
    assertNotNull(lookResult);
    
    // 2. æ‹¾å–ç‰©å“
    TakeCommand take = new TakeCommand();
    String takeResult = take.execute(new Command("take", "key"), game, player);
    assertTrue(takeResult.contains("æ‹¾å–äº†"));
    
    // 3. ç§»åŠ¨
    GoCommand go = new GoCommand();
    String goResult = go.execute(new Command("go", "north"), game, player);
    assertNotNull(goResult);
    
    // 4. è¿”å›
    BackCommand back = new BackCommand();
    String backResult = back.execute(new Command("back", null), game, player);
    assertTrue(backResult.contains("è¿”å›åˆ°"));
}
```

**æµ‹è¯•ç”¨ä¾‹2: é€šå…³æ£€æµ‹**
```java
@Test
public void testGameCompletion() {
    Game game = new Game();
    Player player = game.getPlayer();
    
    // æ¨¡æ‹Ÿå®Œæˆæ‰€æœ‰æ¡ä»¶
    // 1. æ¢ç´¢æ‰€æœ‰æˆ¿é—´
    // 2. æ”¶é›†æ‰€æœ‰ç‰©å“
    // 3. åƒæ‰é­”æ³•é¥¼å¹²
    // 4. å›åˆ°èµ·å§‹æˆ¿é—´
    
    GameCompletionChecker.CompletionInfo info = 
        GameCompletionChecker.checkCompletion(player);
    
    // éªŒè¯é€šå…³æ¡ä»¶
    assertTrue(info.isAtStartRoom());
    assertTrue(info.isAllRoomsExplored());
    assertTrue(info.isAllItemsCollected());
    assertTrue(info.isCookieEaten());
    assertTrue(info.isCompleted());
}
```

### 5.3 æµ‹è¯•è¦†ç›–ç‡

- **Itemç±»**: 100% æ–¹æ³•è¦†ç›–ç‡
- **Roomç±»**: 95% æ–¹æ³•è¦†ç›–ç‡
- **Playerç±»**: 90% æ–¹æ³•è¦†ç›–ç‡
- **å‘½ä»¤ç±»**: 85% æ–¹æ³•è¦†ç›–ç‡
- **Gameç±»**: 80% æ–¹æ³•è¦†ç›–ç‡

### 5.4 æµ‹è¯•æ‰§è¡Œ

**è¿è¡Œæ‰€æœ‰æµ‹è¯•**:
```bash
# ç¼–è¯‘æµ‹è¯•ç±»
javac -d bin -cp "bin;lib\mysql-connector-j-9.5.0.jar" test\*.java

# è¿è¡Œæµ‹è¯•
java -cp "bin;lib\mysql-connector-j-9.5.0.jar" TestRunner
```

---

## å…­ã€é¡¹ç›®æ€»ç»“

### 6.1 å®Œæˆçš„ä¸»è¦ä»»åŠ¡

1. âœ… **ä»£ç ç»“æ„åˆ†æ**: å®Œæˆäº†å¯¹æ ·ä¾‹å·¥ç¨‹çš„æ·±å…¥åˆ†æï¼Œç»˜åˆ¶äº†UMLç±»å›¾ï¼Œæè¿°äº†ä»£ç ç»“æ„
2. âœ… **ä»£ç æ ‡æ³¨**: æ‰€æœ‰Javaç±»éƒ½æ·»åŠ äº†å®Œæ•´çš„JavaDocæ³¨é‡Š
3. âœ… **è®¾è®¡æ”¹è¿›**: ä½¿ç”¨å‘½ä»¤æ¨¡å¼é‡æ„äº†å‘½ä»¤å¤„ç†ç³»ç»Ÿï¼Œæ¶ˆé™¤äº†if-elseé“¾
4. âœ… **åŠŸèƒ½æ‰©å±•**: å®ç°äº†5é¡¹ä¸»è¦åŠŸèƒ½æ‰©å±•ï¼ˆç‰©å“ç³»ç»Ÿã€ç©å®¶ç³»ç»Ÿã€backå‘½ä»¤ã€é­”æ³•é¥¼å¹²ã€ä¼ è¾“æˆ¿é—´ï¼‰
5. âœ… **Webå‰ç«¯**: åˆ›å»ºäº†ç°ä»£åŒ–çš„Webç•Œé¢ï¼Œæ”¯æŒå¤šäººæ¸¸æˆ
6. âœ… **æ•°æ®åº“æ”¯æŒ**: å®ç°äº†MySQLæ•°æ®åº“é›†æˆï¼Œæ”¯æŒç”¨æˆ·ç³»ç»Ÿå’Œæ¸¸æˆçŠ¶æ€ä¿å­˜
7. âœ… **å•å…ƒæµ‹è¯•**: ç¼–å†™äº†å®Œæ•´çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹

### 6.2 æŠ€æœ¯äº®ç‚¹

1. **å‘½ä»¤æ¨¡å¼**: ä¼˜é›…åœ°è§£å†³äº†å‘½ä»¤å¤„ç†çš„æ‰©å±•æ€§é—®é¢˜
2. **å•ä¾‹æ¨¡å¼**: DatabaseManagerä½¿ç”¨å•ä¾‹æ¨¡å¼ç¡®ä¿æ•°æ®åº“è¿æ¥å”¯ä¸€
3. **ç»§æ‰¿å’Œå¤šæ€**: TransporterRoomç»§æ‰¿Roomï¼Œé‡å†™getExitæ–¹æ³•å®ç°ç‰¹æ®ŠåŠŸèƒ½
4. **é›†åˆæ¡†æ¶**: åˆç†ä½¿ç”¨HashMapã€Stackã€Setç­‰é›†åˆç±»
5. **RESTful API**: å®ç°äº†æ ‡å‡†çš„REST APIæ¥å£
6. **å‰åç«¯åˆ†ç¦»**: Webå‰ç«¯å’ŒJavaåç«¯åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤

### 6.3 é‡åˆ°çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ

1. **æŒ‘æˆ˜**: å‘½ä»¤æ¨¡å¼é‡æ„æ—¶ï¼Œéœ€è¦ä¿æŒå‘åå…¼å®¹
   - **è§£å†³**: åˆ›å»ºCommandExecutoræ¥å£ï¼Œé€æ­¥è¿ç§»å‘½ä»¤å¤„ç†é€»è¾‘

2. **æŒ‘æˆ˜**: å¤šç©å®¶ä¼šè¯ç®¡ç†
   - **è§£å†³**: ä½¿ç”¨HashMapå­˜å‚¨ä¼šè¯ï¼Œä»¥sessionIdä¸ºé”®

3. **æŒ‘æˆ˜**: æ•°æ®åº“è¿æ¥ç®¡ç†
   - **è§£å†³**: ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œç¡®ä¿è¿æ¥å”¯ä¸€ï¼Œæ·»åŠ è¿æ¥æ± ç®¡ç†

4. **æŒ‘æˆ˜**: Webå‰ç«¯ä¸åç«¯é€šä¿¡
   - **è§£å†³**: å®ç°JSONåºåˆ—åŒ–/ååºåˆ—åŒ–å·¥å…·ç±»ï¼Œç»Ÿä¸€æ•°æ®æ ¼å¼

### 6.4 æœªæ¥æ”¹è¿›æ–¹å‘

1. **å®‰å…¨æ€§**: å¯†ç åŠ å¯†å­˜å‚¨ï¼ˆä½¿ç”¨BCryptï¼‰
2. **æ€§èƒ½ä¼˜åŒ–**: æ•°æ®åº“è¿æ¥æ± ã€ç¼“å­˜æœºåˆ¶
3. **åŠŸèƒ½æ‰©å±•**: æ›´å¤šæˆ¿é—´ç±»å‹ã€æ›´å¤šç‰©å“ã€ä»»åŠ¡ç³»ç»Ÿ
4. **ç”¨æˆ·ä½“éªŒ**: æ›´ä¸°å¯Œçš„UIåŠ¨ç”»ã€éŸ³æ•ˆæ”¯æŒ
5. **æµ‹è¯•å®Œå–„**: å¢åŠ é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•

---

## ä¸ƒã€å‚è€ƒèµ„æ–™

1. ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹- Bruce Eckel
2. ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹- GoF
3. MySQLå®˜æ–¹æ–‡æ¡£: https://dev.mysql.com/doc/
4. MDN Webæ–‡æ¡£: https://developer.mozilla.org/
5. é¡¹ç›®åŸå§‹ä»£ç : World of Zuulæ ·ä¾‹å·¥ç¨‹

---

**æŠ¥å‘Šå®Œæˆæ—¥æœŸ**: 2024å¹´

**å¼€å‘è€…**: [æ‚¨çš„å§“å]

**é¡¹ç›®åœ°å€**: [GitHubä»“åº“åœ°å€]

